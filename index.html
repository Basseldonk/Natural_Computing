<!-- Page setup and title -->
<!DOCTYPE html>
<html lang="en">
<head><meta http-equiv="Content-Type" content="text/html;
charset=UTF-8">
<title>Assignment 3 (The Chromosomes)</title>
<style type="text/css">
body{
	font-family: "HelveticaNeue-Light", sans-serif; padding : 15px;
}
</style>

<!-- Sourcing the cpm build -->
<script src="./build/cpm.js"></script>
<script src="./examples/html/fpsmeter.min.js"></script>
<script>
"use strict"

let config = {
	// Grid settings
	ndim : 2,
	field_size : [250,250],
	// CPM parameters and configuration
	conf : {
		T : 20, 							// CPM temperature
		J : [[0,20,20], 
			 [20,100,20],
			 [20,20,20]],					// Adhesion parameters
		LAMBDA_V : [0,50,50],				// VolumeConstraint importance per cellkind
		V : [0,200,400],					// Target volume of each cellkind
		LAMBDA_P : [0,10,0],				// PerimeterConstraint importance per cellkind
		P : [0,25,0]	 					// Target perimeter of each cellkind
	},
	// Simulation setup and configuration
	simsettings : {
		NRCELLS : [0, 10], 					// Number of cells to seed for all
		RUNTIME : 500, 						// Only used in node
		CANVASCOLOR : "eaecef",
		CELLCOLOR : ["000000","808080"],	// Cellcolor per cellkind
		SHOWBORDERS : [true, false],		// Show borders
		zoom : 3							// zoom in on canvas with this factor.
	}
}

let sim, meter

function initialize(){
	let custommethods = { initializeGrid : initializeGrid }
	sim = new CPM.Simulation( config, custommethods )
	meter = new FPSMeter({left:"auto", right:"5px"})
	step()
}
function step(){
	sim.step()
	meter.tick()
	requestAnimationFrame( step )
}

function initializeGrid(){
	// add the initializer if not already there
	if( !this.helpClasses["gm"] ){ this.addGridManipulator() }
	// Seed obstacles
	let obstacles = 4 		// This value controls the number of obstacles per row and column
	let per_row = parseInt( this.C.extents[0] / obstacles )
	let per_column = parseInt( this.C.extents[1] / obstacles )
	for( var i = parseInt( per_row / 2 ) ; i < this.C.extents[0] ; i += per_row ){
		for( var j = parseInt (per_column / 2 ) ; j < this.C.extents[1] ; j += per_column ){
			this.gm.seedCellAt( 1, [i,j] )
		}
	}
}

</script>
</head>
<body onload="initialize()">
<h1>Assignment 3</h1>
<p>
This simulation was created by the Chromosomes as part of assignment 3 for the course Natural Computing.
</p>
</body>
</html>